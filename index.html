<!DOCTYPE html>

<html lang="en"><head>

  <meta charset="UTF-8">

  <title>Prakash &#x1F493; Shivani</title>
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flipclock/0.7.8/flipclock.css">
  
  <style>
    body {
			background: #e31b6d9c;
			background: black;
			overflow: hidden;
		}
		
		html,
		body {
		  margin: 0;
		  overflow: hidden;
		  width: 100%;
		  height: 100%;
		  cursor: none;
		  background: black;
		  background: linear-gradient(to bottom, #000000 0%, #5788fe 100%);
		}
		
		.filter {
		  width: 100%;
		  height: 100%;
		  position: absolute;
		  top: 0;
		  left: 0;
		  background:  #fe5757;
		  animation: colorChange 30s ease-in-out infinite;
		  animation-fill-mode: both;
		  mix-blend-mode: overlay;
		}
		
		@keyframes colorChange {
		  0%,
		  100% {
		    opacity: 0;
		  }
		  50% {
		    opacity: .9;
		  }
		}
		
		.clock {
			width: 650px;
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translateX(-50%) translateY(-50%);
		}
		
		canvas#canvas {
			margin: 0 !important;
    	width: 100% !important;
		}
		
		.flip-clock-divider .flip-clock-label {
			color: white !important;
		}
  </style>

  <script>
    window.console = window.console || function(t) {};
  </script>

  <script>
    if (document.location.search.match(/type=embed/gi)) {
      window.parent.postMessage("resize", "*");
    }
	</script>

	
</head>

<body translate="no" onresize="_pexresize()">
  
	<div class="filter"></div>
  <canvas id="rain" width="1920px" height="1080px"></canvas>
  <div class="clock"></div>
	<canvas id="cursor"></canvas>
  
 
  
  
  <!-- Scripts starting point -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://momentjs.com/downloads/moment.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.14/moment-timezone-with-data-2012-2022.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/flipclock/0.7.8/flipclock.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.9/dat.gui.min.js"></script>

  
  <!-- Countdown timer animation -->
  <script id="rendered-js">
    $(document).ready(function () {
      let clock;

      // Grab the current date
      let currentDate = new Date();

      // Target future date/24 hour time/Timezone
      let targetDate = moment.tz("2023-2-8 23:59", "Asia/Kolkata");

      // Calculate the difference in seconds between the future and current date
      let diff = targetDate / 1000 - currentDate.getTime() / 1000;

      if (diff <= 0) {
        // If remaining countdown is 0
        clock = $(".clock").FlipClock(0, {
          clockFace: "DailyCounter",
          countdown: true,
          autostart: false });

        console.log("Date has already passed!");

      } else {
        // Run countdown timer
        clock = $(".clock").FlipClock(diff, {
          clockFace: "DailyCounter",
          countdown: true,
          callbacks: {
            stop: function () {
              console.log("Timer has ended!");
            } } });



        // Check when timer reaches 0, then stop at 0
        setTimeout(function () {
          checktime();
        }, 1000);

        function checktime() {
          t = clock.getTime();
          if (t <= 0) {
            clock.setTime(0);
          }
          setTimeout(function () {
            checktime();
          }, 1000);
        }
      }
    });
  </script>
  
  
  <!-- Canvas animation frame for RAIN -->
  <script>
    var canvas = document.getElementById('rain');
		var ctx = canvas.getContext('2d');


		var stgw = 1920;
		var stgh = 1080;


		var loffset = 0;
		var toffset = 0;

		function _pexresize() {
			var cw = window.innerWidth;
			var ch = window.innerHeight;
			if (cw<=ch*stgw/stgh) {
				loffset = 0;
				toffset = Math.floor(ch-(cw*stgh/stgw))/2;
				canvas.style.width = cw + "px";
				canvas.style.height = Math.floor(cw*stgh/stgw) + "px";
			} else {
				loffset = Math.floor(cw-(ch*stgw/stgh))/2;
				toffset = 0;
				canvas.style.height = ch + "px";
				canvas.style.width = Math.floor(ch*stgw/stgh) + "px";
			}
			canvas.style.marginLeft = loffset +"px";
			canvas.style.marginTop = toffset +"px";
		}
		_pexresize();

		var count = 100;
		var lcount = 6;

		var layer = [];
		var layery = [];

		ctx.fillStyle = "rgba(255,255,255,0.5)";
		for (var l=0;l<lcount;l++) {
			ctx.clearRect(0,0,stgw,stgh);
			for (var i=0;i<count*(lcount-l)/1.5;i++) {
				var myx = Math.floor(Math.random()*stgw);
				var myy = Math.floor(Math.random()*stgh);
				var myh = l*6+8;
				var myw = myh/10;
				ctx.beginPath();
				ctx.moveTo(myx,myy);
				ctx.lineTo(myx+myw,myy+myh);
				ctx.arc(myx, myy+myh, myw, 0, 1 * Math.PI);
				ctx.lineTo(myx-myw,myy+myh);
				ctx.closePath();
				ctx.fill();
			}
			layer[l] = new Image();
			layer[l].src = canvas.toDataURL("image/png");
			layery[l] = 0;
		}

		var stt = 0;
		var str = Date.now()+Math.random()*4000;
		var stact = false;

		function animate() {
			ctx.clearRect(0,0,stgw,stgh);

			for (var l=0;l<lcount;l++) {
				layery[l] += (l+1.5)*5;
				if (layery[l]>stgh) {

					layery[l] =layery[l]-stgh;
				}
				ctx.drawImage(layer[l],0,layery[l]);
				ctx.drawImage(layer[l],0,layery[l]-stgh);
			}
			if (Date.now()>str) {
				stact = true;
			}
			if (stact) {
				stt++;
				if (stt<5+Math.random()*10) {
					var ex = stt/30;
				} else {
					var ex = (stt-10)/30;
				}
				if (stt>20) {
					stt = 0;
					stact = false;
					str = Date.now()+Math.random()*8000+2000;
				}

				ctx.fillStyle = "rgba(255,255,255,"+ex+")";
				ctx.fillRect(0,0,stgw,stgh);
			}
			window.requestAnimationFrame(animate);
		}

    animate();
		
  </script>
	
	
	<!-- Canvas animation frame for CURSOR -->
	<script>
		function Dot(id, x, y, r) {
			this.id = id;
			this.x = x;
			this.y = y;
			this.r = Math.floor(Math.random()*5)+1;
			this.maxLinks = 2;
			this.speed = .5;
			this.a = .5;
			this.aReduction = .005;
			this.color = "rgba(255,255,255,"+this.a+")";
			this.linkColor = "rgba(255,255,255,"+this.a/4+")";

			this.dir = Math.floor(Math.random()*140)+200;
		}
		Dot.prototype.draw = function() {
			ctx.fillStyle = this.color;
			ctx.shadowBlur = this.r * 2;
			ctx.beginPath();
			ctx.arc(this.x, this.y, this.r, 0, 2 * Math.PI, false);
			ctx.closePath();
			ctx.fill();
		}

		Dot.prototype.link = function() {
			if (this.id == 0) return;
			var previousDot1 = getPreviousDot(this.id, 1);
			var previousDot2 = getPreviousDot(this.id, 2);
			var previousDot3 = getPreviousDot(this.id, 3);
			if (!previousDot1) return;
			ctx.strokeStyle = this.linkColor;
			ctx.moveTo(previousDot1.x, previousDot1.y);
			ctx.beginPath();
			ctx.lineTo(this.x, this.y);
			if (previousDot2 != false) ctx.lineTo(previousDot2.x, previousDot2.y);
			if (previousDot3 != false) ctx.lineTo(previousDot3.x, previousDot3.y);
			ctx.stroke();
			ctx.closePath();
		}

		function getPreviousDot(id, stepback) {
			if (id == 0 || id - stepback < 0) return false;
			if (typeof dots[id - stepback] != "undefined") return dots[id - stepback];
			else return false;//getPreviousDot(id - stepback);
		}

		Dot.prototype.move = function() {
			this.a -= this.aReduction;
			if (this.a <= 0) {
				this.die();
				return
			}
			this.color = "rgba(255,255,255,"+this.a+")";
			this.linkColor = "rgba(255,255,255,"+this.a/4+")";
			this.x = this.x + Math.cos(degToRad(this.dir))*(this.speed+params.dotsSpeed/100),
			this.y = this.y + Math.sin(degToRad(this.dir))*(this.speed+params.dotsSpeed/100);

			this.draw();
			this.link();
		}

		Dot.prototype.die = function() {
				dots[this.id] = null;
				delete dots[this.id];
		}


		var canvas  = document.getElementById('cursor'),
			ctx = canvas.getContext('2d'),
			WIDTH,
			HEIGHT,
			mouseMoving = false,
			mouseMoveChecker,
			mouseX,
			mouseY,
			dots = [],
			dotsMinDist = 2,
			params = {
				maxDistFromCursor: 50,
				dotsSpeed: 0,
				backgroundSpeed: 0
			};

		var gui;
		gui = new dat.GUI();
		gui.add(params, 'maxDistFromCursor').min(0).max(100).step(10).name('Size');
		gui.add(params, 'dotsSpeed').min(0).max(100).step(.5).name('Speed');
		gui.open();

		setCanvasSize();
		init();

		function setCanvasSize() {
			WIDTH = document.documentElement.clientWidth,
				HEIGHT = document.documentElement.clientHeight;                      

			canvas.setAttribute("width", WIDTH);
			canvas.setAttribute("height", HEIGHT);
		}

		function init() {
			ctx.strokeStyle = "white";
			ctx.shadowColor = "white";
			ctx.shadowBlur = 0;
			animate();
		}

		function animate() {
				ctx.clearRect(0, 0, WIDTH, HEIGHT);
				for (var i in dots) {
					dots[i].move();
				}
				drawIfMouseMoving();
				requestAnimationFrame(animate);
		}

		window.onmousemove = function(e){
			mouseMoving = true;
			mouseX = e.clientX;
			mouseY = e.clientY;
			clearInterval(mouseMoveChecker);
			mouseMoveChecker = setTimeout(function() {
				mouseMoving = false;
			}, 100);
		}


		function drawIfMouseMoving(){
			if (!mouseMoving) return;

			if (dots.length == 0) {
				dots[0] = new Dot(0, mouseX, mouseY);
				dots[0].draw();
				return;
			}

			var previousDot = getPreviousDot(dots.length, 1);
			var prevX = previousDot.x; 
			var prevY = previousDot.y; 

			var diffX = Math.abs(prevX - mouseX);
			var diffY = Math.abs(prevY - mouseY);

			if (diffX < dotsMinDist || diffY < dotsMinDist) return;

			var xVariation = Math.random() > .5 ? -1 : 1;
			xVariation = xVariation*Math.floor(Math.random()*params.maxDistFromCursor)+1;
			var yVariation = Math.random() > .5 ? -1 : 1;
			yVariation = yVariation*Math.floor(Math.random()*params.maxDistFromCursor)+1;
			dots[dots.length] = new Dot(dots.length, mouseX+xVariation, mouseY+yVariation);
			dots[dots.length-1].draw();
			dots[dots.length-1].link();
		}
		//setInterval(drawIfMouseMoving, 17);

		function degToRad(deg) {
			return deg * (Math.PI / 180);
		}
	</script>
  
  </body>
</html>
