<!DOCTYPE html>

<html lang="en"><head>

  <meta charset="UTF-8">

  <title>PrakaShivani</title>
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flipclock/0.7.8/flipclock.css">
  
  <style>
		body {
			background: #e31b6d9c;
			background: black;
	  }
	  .clock {
			width: 650px;
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translateX(-50%) translateY(-50%);
	  }
  </style>

  <script>
    window.console = window.console || function(t) {};
  </script>

  <script>
    if (document.location.search.match(/type=embed/gi)) {
      window.parent.postMessage("resize", "*");
    }
	</script>


</head>

<body translate="no" onresize="_pexresize()">
  
  <canvas id="canvas" width="1920px" height="1080px"></canvas>
  <div class="clock"></div>
  
  
  
  
  <!-- Scripts starting point -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://momentjs.com/downloads/moment.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.14/moment-timezone-with-data-2012-2022.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/flipclock/0.7.8/flipclock.js"></script>

  
  <!-- Countdown timer animation -->
  <script id="rendered-js">
    $(document).ready(function () {
      let clock;

      // Grab the current date
      let currentDate = new Date();

      // Target future date/24 hour time/Timezone
      let targetDate = moment.tz("2023-2-8 23:59", "Asia/Kolkata");

      // Calculate the difference in seconds between the future and current date
      let diff = targetDate / 1000 - currentDate.getTime() / 1000;

      if (diff <= 0) {
        // If remaining countdown is 0
        clock = $(".clock").FlipClock(0, {
          clockFace: "DailyCounter",
          countdown: true,
          autostart: false });

        console.log("Date has already passed!");

      } else {
        // Run countdown timer
        clock = $(".clock").FlipClock(diff, {
          clockFace: "DailyCounter",
          countdown: true,
          callbacks: {
            stop: function () {
              console.log("Timer has ended!");
            } } });



        // Check when timer reaches 0, then stop at 0
        setTimeout(function () {
          checktime();
        }, 1000);

        function checktime() {
          t = clock.getTime();
          if (t <= 0) {
            clock.setTime(0);
          }
          setTimeout(function () {
            checktime();
          }, 1000);
        }
      }
    });
  </script>
  
  
  <!-- Canvas animation frame -->
  <script>
    var canvas = document.getElementById('canvas');
		var ctx = canvas.getContext('2d');


		var stgw = 1920;
		var stgh = 1080;


		var loffset = 0;
		var toffset = 0;

		function _pexresize() {
			var cw = window.innerWidth;
			var ch = window.innerHeight;
			if (cw<=ch*stgw/stgh) {
				loffset = 0;
				toffset = Math.floor(ch-(cw*stgh/stgw))/2;
				canvas.style.width = cw + "px";
				canvas.style.height = Math.floor(cw*stgh/stgw) + "px";
			} else {
				loffset = Math.floor(cw-(ch*stgw/stgh))/2;
				toffset = 0;
				canvas.style.height = ch + "px";
				canvas.style.width = Math.floor(ch*stgw/stgh) + "px";
			}
			canvas.style.marginLeft = loffset +"px";
			canvas.style.marginTop = toffset +"px";
		}
		_pexresize();

		var count = 100;
		var lcount = 6;

		var layer = [];
		var layery = [];

		ctx.fillStyle = "rgba(255,255,255,0.5)";
		for (var l=0;l<lcount;l++) {
			ctx.clearRect(0,0,stgw,stgh);
			for (var i=0;i<count*(lcount-l)/1.5;i++) {
				var myx = Math.floor(Math.random()*stgw);
				var myy = Math.floor(Math.random()*stgh);
				var myh = l*6+8;
				var myw = myh/10;
				ctx.beginPath();
				ctx.moveTo(myx,myy);
				ctx.lineTo(myx+myw,myy+myh);
				ctx.arc(myx, myy+myh, myw, 0, 1 * Math.PI);
				ctx.lineTo(myx-myw,myy+myh);
				ctx.closePath();
				ctx.fill();
			}
			layer[l] = new Image();
			layer[l].src = canvas.toDataURL("image/png");
			layery[l] = 0;
		}

		var stt = 0;
		var str = Date.now()+Math.random()*4000;
		var stact = false;

		function animate() {
			ctx.clearRect(0,0,stgw,stgh);

			for (var l=0;l<lcount;l++) {
				layery[l] += (l+1.5)*5;
				if (layery[l]>stgh) {

					layery[l] =layery[l]-stgh;
				}
				ctx.drawImage(layer[l],0,layery[l]);
				ctx.drawImage(layer[l],0,layery[l]-stgh);
			}
			if (Date.now()>str) {
				stact = true;
			}
			if (stact) {
				stt++;
				if (stt<5+Math.random()*10) {
					var ex = stt/30;
				} else {
					var ex = (stt-10)/30;
				}
				if (stt>20) {
					stt = 0;
					stact = false;
					str = Date.now()+Math.random()*8000+2000;
				}

				ctx.fillStyle = "rgba(255,255,255,"+ex+")";
				ctx.fillRect(0,0,stgw,stgh);
			}
			window.requestAnimationFrame(animate);
		}

    animate();
		
  </script>
  
  </body>
</html>
